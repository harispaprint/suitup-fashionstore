{% extends "base_admin.html" %} 


{% load static %} 

{% block content %}
  {% comment %} <div class="container mt-4">
    <h2>{{ title }}</h2>
    <form method="post" class="mt-3">
        {% csrf_token %}
        {% for field in form %}
        <div class="mb-3">
            <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>
            {{ field }}
            {% if field.errors %}
            <div class="alert alert-danger mt-1">
                {{ field.errors }}
            </div>
            {% endif %}
        </div>
        {% endfor %}
        <button type="submit" class="btn btn-primary">Save</button>
       
    </form>
  </div> {% endcomment %}

  <h1>Create Stock</h1>
    <form method="post" id="stock-form">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Save</button>
    </form>

    <script>
        $(document).ready(function () {
            $('#id_product').change(function () {
                var productId = $(this).val();
                if (productId) {
                    $.ajax({
                        url: "{% url 'load_variations' %}",
                        data: {
                            'product_id': productId
                        },
                        success: function (data) {
                            $('#id_variation_combo').empty();
                            $.each(data, function (index, item) {
                                $('#id_variation_combo').append(
                                    `<option value="${item.id}">${item.variation_category__name} - ${item.variation_value}</option>`
                                );
                            });
                        }
                    });
                } else {
                    $('#id_variation_combo').empty();
                }
            });
        });
    </script>
  
{% endblock content %}

